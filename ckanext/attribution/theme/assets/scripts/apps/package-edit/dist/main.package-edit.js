!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["package-edit"]=t():e["package-edit"]=t()}(window,(function(){return function(e){function t(t){for(var i,o,c=t[0],s=t[1],l=t[2],f=0,m=[];f<c.length;f++)o=c[f],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&m.push(r[o][0]),r[o]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);for(u&&u(t);m.length;)m.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,c=1;c<n.length;c++){var s=n[c];0!==r[s]&&(i=!1)}i&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},r={2:0},a=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,i){n=r[e]=[t,i]}));t.push(n[2]=i);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=function(e){return o.p+""+({0:"edit-activity",1:"edit-agent",3:"show-activity",4:"show-agent"}[e]||e)+".package-edit.js"}(e);var s=new Error;a=function(t){c.onerror=c.onload=null,clearTimeout(l);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,n[1](s)}r[e]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(t)},o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/assets/scripts/apps/package-edit/",o.oe=function(e){throw console.error(e),e};var c=window.webpackJsonppackage_edit=window.webpackJsonppackage_edit||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;return a.push([41,8,7,6,11,9,12,5,10]),n()}({0:function(e,t,n){"use strict";var i=n(8);n.d(t,"c",(function(){return i.a}));var r=n(12);n.d(t,"a",(function(){return r.a}));var a=n(20);n.d(t,"b",(function(){return a.a}));var o=n(6);n.d(t,"e",(function(){return o.a}));var c=n(16);n.d(t,"d",(function(){return c.a}))},12:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n(15),r=n(8),a=n(6);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n,i=0;i<t.length;i++)(n=t[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=m(e);if(t){var r=m(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p,d,h,b=function(e){function t(){return c(this,t),n.apply(this,arguments)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e);var n=u(t);return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(t,null,[{key:"fields",value:function(){return{id:this.attr(null),activity:this.attr(null),scheme:this.attr(null),level:this.attr(null),time:this.attr(null),order:this.attr(null),agent_id:this.attr(null),packaged_id:this.attr(null),agent:this.belongsTo(r.a,"agent_id"),meta:this.morphOne(a.a,"item_id","item_type")}}}]),t}(i.a);h="activities",(d="entity")in(p=b)?Object.defineProperty(p,d,{value:h,enumerable:!0,configurable:!0,writable:!0}):p[d]=h},13:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.classes},[n("label",{attrs:{for:e.fieldId}},[e._t("default")],2),e._v(" "),n("input",{attrs:{type:e.inputType,id:e.fieldId},domProps:{value:e.value},on:{change:e.setValue}})])};i._withStripped=!0;var r=n(34),a={name:"Field",props:["value","inputType","cls"],data:function(){return{fieldId:Object(r.a)(8)}},computed:{classes:function(){var e=["attribution-field"];return this.cls&&(e=e.concat(this.cls)),e}},methods:{setValue:function(e){this.$emit("input",e.target.value)}}},o=n(1),c=Object(o.a)(a,i,[],!1,null,"fd7017d8",null);c.options.__file="src/components/fields/Field.vue";t.a=c.exports},15:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(10),r=n(6),a=n(36),o=n.n(a);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n,i=0;i<t.length;i++)(n=t[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p(e);if(t){var r=p(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){function t(){return s(this,t),n.apply(this,arguments)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e);var n=f(t);return function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(t,[{key:"getCopy",value:function(){var e=o()(this.$getAttributes()),t={};return Object.entries(this.$fields()).filter((function(e){return!(e[1]instanceof i.b)})).forEach((function(n){t[n[0]]=e[n[0]]})),delete t.id,t}}],[{key:"updateMeta",value:function(e,t){var n=this;return new Promise((function(i,a){var o=n.query().with("meta").find(e);o||a("Item not found"),r.a.update({where:o.meta.id,data:t}).then((function(e){return i(e)})).catch((function(e){return a(e)}))}))}},{key:"afterCreate",value:function(e){r.a.query().where("item_id",e.id).where("item_type",this.entity).exists()||r.a.insert({data:{item_id:e.id,item_type:this.entity}})}}]),t}(i.a)},16:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=s(e);if(t){var r=s(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return m}));var l,u,f,m=function(e){function t(){return r(this,t),n.apply(this,arguments)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,e);var n=o(t);return t}(n(12).a);f="citations",(u="entity")in(l=m)?Object.defineProperty(l,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[u]=f},20:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n(15),r=n(8),a=n(6);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n,i=0;i<t.length;i++)(n=t[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=m(e);if(t){var r=m(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p,d,h,b=function(e){function t(){return c(this,t),n.apply(this,arguments)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e);var n=u(t);return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(t,null,[{key:"fields",value:function(){return{id:this.attr(null),db_id:this.attr(null),agent_id:this.attr(null),other_agent_id:this.attr(null),affiliation_type:this.attr(null),description:this.attr(null),start_date:this.attr(null),end_date:this.attr(null),package_id:this.attr(null),agent:this.belongsTo(r.a,"agent_id"),other_agent:this.belongsTo(r.a,"other_agent_id"),meta:this.morphOne(a.a,"item_id","item_type")}}}]),t}(i.a);h="affiliations",(d="entity")in(p=b)?Object.defineProperty(p,d,{value:h,enumerable:!0,configurable:!0,writable:!0}):p[d]=h},22:function(e,t,n){"use strict";var i=n(2),r=n(3),a=n(7),o=n(0),c=n(10);i.a.use(r.a);var s=new c.c.Database;s.register(o.c),s.register(o.b),s.register(o.a),s.register(o.e),s.register(o.d);var l=new r.a.Store({plugins:[c.c.install(s)],state:{packageId:null,packageDetail:{},canEdit:!1,controlledLists:{agentTypes:{},activityTypes:{},activityLevels:[],agentIdSchemes:{}}},getters:{agentTypeIcon:function(e){return function(t){var n=e.controlledLists.agentTypes[t];return n?n.fa_icon:"fas fa-asterisk"}},agentIdIcon:function(e){return function(t){var n=e.controlledLists.agentIdSchemes[t];return n?n.fa_icon:"fas fa-link"}},serialisedContent:function(){var e=function(e){return e.query().with("meta").all().map((function(e){return e.$toJson()}))};return JSON.stringify({agents:e(o.c),activities:e(o.a),affiliations:e(o.b),citations:e(o.d)})}},mutations:{setPackageId:function(e,t){i.a.set(e,"packageId",t)},setEditPermission:function(e,t){i.a.set(e,"canEdit",t)}},actions:{initialise:function(e){return e.dispatch("initLists").then((function(){return e.dispatch("getContributions")}))},getContributions:function(e){return e.state.packageId&&""!==e.state.packageId?Object(a.b)("package_contributions_show?id=".concat(e.state.packageId)).then((function(t){if(void 0!==t){var n=t.map((function(e){return e.agent.id}));e.dispatch("entities/deleteAll").then((function(){o.c.insert({data:t.map((function(t){var i=t.agent;return i.affiliations=t.affiliations.map((function(e){return e.db_id=e.id,e.id=null,n.includes(e.other_agent.id)||(e.other_agent.meta={is_hidden:!0}),e})),i._activities=t.activities.filter((function(e){return"[citation]"!==e.activity})).map((function(t){return t.package_id||(t.package_id=e.state.packageId),t})),i._citation=t.activities.filter((function(e){return"[citation]"===e.activity})).map((function(t){return t.package_id||(t.package_id=e.state.packageId),t})).slice(-1)[0],i}))})}))}})):void 0},getPackage:function(e,t){return e.commit("setPackageId",t),e.state.packageId&&""!==e.state.packageId?Object(a.b)("package_show?id=".concat(t)).then((function(t){e.state.packageDetail=t})):void 0},initLists:function(e){return Object(a.b)("attribution_controlled_lists").then((function(t){i.a.set(e.state.controlledLists,"agentTypes",t.agent_types),i.a.set(e.state.controlledLists,"activityTypes",t.contribution_activity_types),i.a.set(e.state.controlledLists,"activityLevels",t.contribution_activity_levels),i.a.set(e.state.controlledLists,"agentIdSchemes",t.agent_external_id_schemes)}))},removeContributor:function(e,t){o.c.updateMeta(t,{is_hidden:!0,to_delete:!0}),o.c.query().with("_activities").find(t).activities.forEach((function(e){o.a.updateMeta(e.id,{to_delete:!0})}))},syncAgent:function(e,t){return o.c.updateMeta(t,{syncing:!0}),Object(a.b)("agent_external_read?id=".concat(t,"&diff=True")).then((function(e){o.c.update({where:t,data:e}),o.c.updateMeta(t,{is_dirty:!0})})).finally((function(){return o.c.updateMeta(t,{syncing:!1})}))},toggleActivity:function(e,t){var n=o.a.query().with("meta").find(t);o.a.updateMeta(t,{to_delete:!n.meta.to_delete})}}});t.a=l},25:function(e,t,n){"use strict";var i=function(){var e=this.$createElement;return(this._self._c||e)("div")};i._withStripped=!0;var r=n(2),a=n(22),o={saveActivity:"save-activity",closeActivity:"close-activity",removeContributor:"remove-contributor"},c=new r.a;c.$on(o.removeContributor,(function(e){a.a.dispatch("removeContributor",e)}));var s=n(8),l={name:"Common",props:["contributorId"],data:function(){return{eventBus:c,events:o}},computed:{contributor:function(){return s.a.query().with("meta").with("citation").find(this.contributorId)}}},u=n(1),f=Object(u.a)(l,i,[],!1,null,null,null);f.options.__file="src/components/Common.vue";t.a=f.exports},41:function(e,t,n){e.exports=n(71)},6:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n,i=0;i<t.length;i++)(n=t[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var r=l(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return p}));var u,f,m,p=function(e){function t(){return r(this,t),n.apply(this,arguments)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(t,e);var n=c(t);return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(t,null,[{key:"fields",value:function(){return{id:this.uid(),item_id:this.attr(null),item_type:this.attr(null),is_hidden:this.boolean(!1),is_editing:this.boolean(!1),to_delete:this.boolean(!1),is_dirty:this.boolean(!1),syncing:this.boolean(!1),is_new:this.boolean(!1)}}}]),t}(n(10).a);m="metadata",(f="entity")in(u=p)?Object.defineProperty(u,f,{value:m,enumerable:!0,configurable:!0,writable:!0}):u[f]=m},7:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var i=n(14),r=n.n(i),a=n(35),o=n.n(a),c=r.a.create({baseURL:"/api/3/action/",timeout:6e4,headers:{"Content-Type":"application/json"}});o()(c,{debug:!1});var s=c.cancelAll;function l(e,t){return c.get(e,{requestId:t}).then((function(e){if(e.data&&e.data.success)return e.data.result;throw Error(e.data.error||"Unspecified error")})).catch((function(){}))}},71:function(e,t,n){"use strict";n.r(t);var i=n(2),r=n(22),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("CitationPreview"),e._v(" "),n("div",{staticClass:"cited-contributors"},[n("draggable",{attrs:{group:"citationOrder",handle:".citation-ordering"},model:{value:e.citedContributors,callback:function(t){e.citedContributors=t},expression:"citedContributors"}},e._l(e.citedContributors,(function(e){return n("ContributionBlock",{key:e.id,attrs:{"contributor-id":e.id}})})),1)],1),e._v(" "),n("div",{staticClass:"other-contributors"},[n("draggable",{attrs:{group:"citationOrder",handle:".citation-ordering"},model:{value:e.otherContributors,callback:function(t){e.otherContributors=t},expression:"otherContributors"}},e._l(e.otherContributors,(function(e){return n("ContributionBlock",{key:e.id,attrs:{"contributor-id":e.id}})})),1)],1),e._v(" "),n("AgentSearch"),e._v(" "),n("input",{attrs:{type:"hidden",id:"contributor-content",name:"attribution"},domProps:{value:e.serialisedContent}})],1)};a._withStripped=!0;var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"contribution-block",class:{cited:e.contributor.citeable}},[n("div",{staticClass:"citation-ordering"},[e.contributor.citeable?[n("i",{staticClass:"fas fa-angle-up fa-lg btn-1",class:{"btn-disabled":1===e.contributor.citation.order},on:{click:function(t){return e.moveCitation(-1)}}}),e._v(" "),n("span",{staticClass:"btn-2",attrs:{title:"Cited author"}},[e._v(e._s(e.contributor.citation.order))]),e._v(" "),n("i",{staticClass:"fas fa-angle-down fa-lg btn-3",class:{"btn-disabled":e.lastCited},on:{click:function(t){return e.moveCitation(1)}}}),e._v(" "),n("i",{staticClass:"fas fa-minus btn-4",attrs:{title:"Remove from citation"},on:{click:e.toggleCitation}})]:e._e(),e._v(" "),e.contributor.citeable?e._e():[n("i",{staticClass:"fas fa-plus btn-2",attrs:{title:"Include in citation"},on:{click:e.toggleCitation}})]],2),e._v(" "),n("div",[e.contributor.meta.is_editing?e._e():n("ShowAgent",{attrs:{"contributor-id":e.contributorId},on:{"toggle-edit":e.toggleAgentEdit}}),e._v(" "),e.contributor.meta.is_editing?n("EditAgent",{attrs:{"contributor-id":e.contributorId},on:{"toggle-edit":e.toggleAgentEdit}}):e._e(),e._v(" "),n("div",{staticClass:"agent-activities"},[e._l(e.contributor.activities,(function(t){return n("ShowActivity",{key:t.id,attrs:{"activity-id":t.id},on:{"toggle-edit":function(n){return e.toggleActivityEdit(t.id)}}})})),e._v(" "),n("span",{staticClass:"icon-btn",on:{click:e.newActivity}},[n("i",{staticClass:"fas fa-lg",class:e.activityCreating?"fa-times-circle":"fa-plus-circle"})])],2),e._v(" "),e.activityEditing?n("EditActivity",{attrs:{"activity-id":e.activityEditing},on:{"toggle-edit":e.saveActivityEdit}}):e._e()],1)])};o._withStripped=!0;var c=n(3),s=n(25),l=n(0);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function f(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?u(Object(t),!0).forEach((function(n){m(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p={name:"ContributionBlock",extends:s.a,components:{EditAgent:function(){return n.e(1).then(n.bind(null,73))},EditActivity:function(){return n.e(0).then(n.bind(null,74))},ShowActivity:function(){return n.e(3).then(n.bind(null,76))},ShowAgent:function(){return n.e(4).then(n.bind(null,75))}},data:function(){return{activityEditing:null}},computed:f(f({},Object(c.e)(["packageId","controlledLists"])),{},{activityCreating:function(){return!!this.activityEditing&&l.a.query().with("meta").find(this.activityEditing).meta.is_new},lastCited:function(){if(this.contributor.citeable)return l.c.query().where("isActive",!0).where("citeable",!0).count()===this.contributor.citation.order}}),methods:{toggleAgentEdit:function(){l.c.updateMeta(this.contributorId,{is_editing:!this.contributor.meta.is_editing})},toggleActivityEdit:function(e){this.activityEditing=e&&this.activityEditing!==e?e:null},saveActivityEdit:function(){this.activityEditing=null},newActivity:function(){var e=this;this.activityCreating?(l.a.delete(this.activityEditing),this.activityEditing=null):l.a.insert({data:{agent_id:this.contributorId,package_id:this.packageId,meta:{is_new:!0}}}).then((function(t){e.activityEditing=t.activities[0].id}))},moveCitation:function(e){var t=this,n=this.contributor.citation.order,i=n+e;1>i||this.lastCited&&1===e||l.d.update({where:function(e){return e.order===i},data:{order:n}}).then((function(){l.d.update({where:t.contributor.citation.id,data:{order:i}})}))},toggleCitation:function(){if(this.contributor.citeable)l.d.updateMeta(this.contributor.citation.id,{to_delete:!0});else{var e=l.c.query().where("isActive",!0).where("citeable",!0).count();this.contributor.citation?(l.d.update({where:this.contributor.citation.id,data:{order:e+1}}),l.d.updateMeta(this.contributor.citation.id,{to_delete:!1})):l.d.insert({data:{activity:"[citation]",scheme:"internal",agent_id:this.contributorId,package_id:this.packageId,order:e+1,meta:{is_new:!0}}})}}},watch:{activityEditing:function(e,t){t&&l.a.updateMeta(t,{is_editing:!1}).catch((function(){})),e&&l.a.updateMeta(e,{is_editing:!0}).catch((function(){}))}}},d=n(1),h=Object(d.a)(p,o,[],!1,null,null,null);h.options.__file="src/components/ContributionBlock.vue";var b=h.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"contribution-block-new"},[n("div",{staticClass:"new-contribution-header"},[e._m(0),e._v(" "),n("div",{staticClass:"toggle-wrapper"},[n("span",{staticClass:"toggle-label"},[e._v("Include external results?")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.useExternalSearch,expression:"useExternalSearch"}],staticClass:"toggle-switch",attrs:{id:"external-search-toggle",type:"checkbox"},domProps:{checked:Array.isArray(e.useExternalSearch)?e._i(e.useExternalSearch,null)>-1:e.useExternalSearch},on:{change:[function(t){var n=e.useExternalSearch,i=t.target,r=!!i.checked;if(Array.isArray(n)){var a=e._i(n,null);i.checked?a<0&&(e.useExternalSearch=n.concat([null])):a>-1&&(e.useExternalSearch=n.slice(0,a).concat(n.slice(a+1)))}else e.useExternalSearch=r},e.redoSearch]}}),e._v(" "),n("label",{attrs:{for:"external-search-toggle"}}),e._v(" "),e._m(1)]),e._v(" "),n("autocomplete-field",{attrs:{options:e.agentOptions,"item-id":"new-agent",delay:1e3,loading:e.searchLoading,failed:e.searchFailed},on:{typing:e.updateAgentOptions,input:e.setAgent},model:{value:e.newAgent,callback:function(t){e.newAgent=t},expression:"newAgent"}})],1),e._v(" "),e.newAgent&&e.newAgent.id?n("ShowAgent",{attrs:{"contributor-id":e.newAgent.id}}):e._e(),e._v(" "),e.activity?n("EditActivity",{attrs:{"activity-id":e.activity.id},on:{"toggle-edit":e.finish}}):e._e()],1)};v._withStripped=!0;var g=n(7),y=n(14),x=n.n(y);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function w(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?_(Object(t),!0).forEach((function(n){O(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j={name:"AgentSearch",components:{EditActivity:function(){return n.e(0).then(n.bind(null,74))},ShowAgent:function(){return n.e(4).then(n.bind(null,75))}},data:function(){return{newAgent:null,agentOptions:{},optionSearchInput:null,searchFailed:null,useExternalSearch:!1,queuedSearches:0}},computed:w(w({},Object(c.e)(["controlledLists","packageId"])),{},{searchLoading:function(){return 0<this.queuedSearches},activity:function(){return this.newAgent&&this.newAgent.activities?this.newAgent.activities.slice(-1)[0]:null}}),methods:{updateAgentOptions:function(e){var t=this;return""===e||null===e?(this.optionSearchInput=null,void(this.agentOptions=[])):void(e===this.optionSearchInput||(this.optionSearchInput=e,this.agentOptions={},this.searchFailed=null,this.queuedSearches++,Object(g.b)("agent_list?q="+e,"internalSearch").then((function(e){t.$set(t.agentOptions,"default",e.map((function(e){var t=e.display_name;return e.external_id&&(t+=" (".concat(e.external_id,")")),{label:t,value:e}})).filter((function(e){return!l.c.query().whereHas("meta",(function(e){e.where("is_hidden",!1)})).where("id",e.value.id).exists()})))})).catch((function(e){x.a.isCancel(e)||(Object(g.a)(),t.searchFailed=e)})).finally((function(){t.queuedSearches--})),this.useExternalSearch&&(this.queuedSearches++,Object(g.b)("agent_external_search?q="+e,"externalSearch").then((function(e){e&&Object.entries(e).forEach((function(e){var n=t.controlledLists.agentIdSchemes[e[0]];t.$set(t.agentOptions,n.label,e[1].records.map((function(e){var t=e.name;return e.family_name&&(t=e.family_name+", "+e.given_names),{label:t,value:e}})))}))})).catch((function(e){x.a.isCancel(e)||(Object(g.a)(),t.searchFailed=e)})).finally((function(){t.queuedSearches--})))))},redoSearch:function(){var e=this.optionSearchInput;this.optionSearchInput=null,this.updateAgentOptions(e)},finish:function(){l.c.updateMeta(this.newAgent.id,{is_hidden:!1}),this.newAgent=null,this.optionSearchInput=null},setAgent:function(e){var t=this;if(e){var n,i=null,r=null;e.id?i=l.c.query().where("id",e.id).get():e.external_id&&(i=l.c.query().where("external_id",e.external_id).where("external_id_scheme",e.external_id_scheme).get()),i&&0<i.length?(r=i[0].id,n=function(){return l.c.updateMeta(r,{is_hidden:!0,to_delete:!1,is_new:!0})}):(e.meta={is_hidden:!0,to_delete:!1,is_new:!0},n=function(){return l.c.insert({data:e}).then((function(e){r=e.agents[0].id}))}),n().then((function(){l.a.insert({data:{agent_id:r,package_id:t.packageId,meta:{is_new:!0,is_editing:!0}}}).then((function(){var e=l.c.query().where("isActive",!0).where("citeable",!0).count();return l.d.insert({data:{agent_id:r,package_id:t.packageId,order:e+1,meta:{is_new:!0}}})})).then((function(){t.newAgent=l.c.find(r)}))}))}else this.newAgent=null}}},k=Object(d.a)(j,v,[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("b",[e._v("Add new contributor:")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"help-icon"},[n("i",{staticClass:"fas fa-question-circle"}),e._v(" "),n("div",{staticClass:"help-tooltip",attrs:{role:"tooltip"}},[e._v("\n                    Search external APIs (e.g. ORCID and ROR) for contributors that have not yet\n                    been imported. This may take several seconds.\n                ")])])}],!1,null,null,null);k.options.__file="src/components/AgentSearch.vue";var C=k.exports,S=n(37),P=n.n(S),E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"citation-preview"},[n("div",{staticClass:"citation-preview-header"},[n("span",{staticClass:"citation-preview-title"},[e._v("Citation preview")]),e._v(" "),n("help-tooltip",[e._v("\n            This is a rough guide to help visualise how changes made to the contributors below will affect the\n            citation output.\n            "),n("br"),e._v("\n            Only numbered contributors are counted as citeable authors. Click the plus icon to make\n            a contributor citeable.\n        ")])],1),e._v(" "),n("div",{staticClass:"citation-preview-body"},[n("div",{staticClass:"scroll-select",style:{width:e.selectWidth}},[n("i",{staticClass:"fas fa-angle-left fa-lg",on:{click:function(t){return e.scrollFormat(-1)}}}),e._v(" "),n("span",[e._v(e._s(e.availableFormats[e.citationFormat]))]),e._v(" "),n("i",{staticClass:"fas fa-angle-right fa-lg",on:{click:function(t){return e.scrollFormat(1)}}})]),e._v(" "),n("div",{staticClass:"citation-string"},[e._v(e._s(e.citation))])])])};E._withStripped=!0;var A=n(9);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function z(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?I(Object(t),!0).forEach((function(n){R(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(72);var L={name:"CitationPreview",data:function(){return{etal:!1,citationFormat:"apa",availableFormats:{apa:"APA",vancouver:"Vancouver",harvard1:"Harvard",mla:"MLA",chicago:"Chicago",ieee:"IEEE"}}},computed:z(z({},Object(c.e)(["packageDetail"])),{},{citedContributors:function(){return l.c.query().with("meta").where("isActive",!0).where("citeable",!0).get().sort((function(e,t){return e.citation.order-t.citation.order}))},citation:function(){var e=this.citedContributors.map((function(e){return"person"===e.agent_type?{family:e.family_name,given:e.given_names}:{literal:e.name}}));return new A.a({type:"dataset",title:this.packageDetail?this.packageDetail.title:"Dataset Title",author:e,issued:{"date-parts":[[(new Date).getFullYear()]]}}).format("bibliography",{template:this.citationFormat})},selectWidth:function(){return 10*Object.values(this.availableFormats).sort((function(e,t){return t.length-e.length}))[0].length+20+"px"}}),methods:{scrollFormat:function(e){var t=Object.keys(this.availableFormats),n=t.indexOf(this.citationFormat);-1===n&&(n=0);var i=n+e;0>i?i=t.length-1:i===t.length&&(i=0),this.citationFormat=t[i]}},created:function(){var e=A.b.config.get("@csl");e.templates.add("ieee",'<?xml version="1.0" encoding="utf-8"?>\n<style xmlns="http://purl.org/net/xbiblio/csl" class="in-text" version="1.0" demote-non-dropping-particle="sort-only">\n  <info>\n    <title>IEEE</title>\n    <id>http://www.zotero.org/styles/ieee</id>\n    <link href="http://www.zotero.org/styles/ieee" rel="self"/>\n    <link href="https://ieeeauthorcenter.ieee.org/wp-content/uploads/IEEE-Reference-Guide.pdf" rel="documentation"/>\n    <link href="https://journals.ieeeauthorcenter.ieee.org/your-role-in-article-production/ieee-editorial-style-manual/" rel="documentation"/>\n    <author>\n      <name>Michael Berkowitz</name>\n      <email>mberkowi@gmu.edu</email>\n    </author>\n    <contributor>\n      <name>Julian Onions</name>\n      <email>julian.onions@gmail.com</email>\n    </contributor>\n    <contributor>\n      <name>Rintze Zelle</name>\n      <uri>http://twitter.com/rintzezelle</uri>\n    </contributor>\n    <contributor>\n      <name>Stephen Frank</name>\n      <uri>http://www.zotero.org/sfrank</uri>\n    </contributor>\n    <contributor>\n      <name>Sebastian Karcher</name>\n    </contributor>\n    <contributor>\n      <name>Giuseppe Silano</name>\n      <email>g.silano89@gmail.com</email>\n      <uri>http://giuseppesilano.net</uri>\n    </contributor>\n    <contributor>\n      <name>Patrick O\'Brien</name>\n    </contributor>\n    <contributor>\n      <name>Brenton M. Wiernik</name>\n    </contributor>\n    <category citation-format="numeric"/>\n    <category field="engineering"/>\n    <category field="generic-base"/>\n    <summary>IEEE style as per the 2018 guidelines, V 11.12.2018.</summary>\n    <updated>2019-12-20T09:14:19+00:00</updated>\n    <rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights>\n  </info>\n  <locale xml:lang="en">\n    <terms>\n      <term name="chapter" form="short">ch.</term>\n      <term name="presented at">presented at the</term>\n      <term name="available at">available</term>\n    </terms>\n  </locale>\n  \x3c!-- Macros --\x3e\n  <macro name="status">\n    <choose>\n      <if variable="page issue volume" match="none">\n        <text variable="status" text-case="capitalize-first" suffix="" font-weight="bold"/>\n      </if>\n    </choose>\n  </macro>\n  <macro name="edition">\n    <choose>\n      <if type="bill book chapter graphic legal_case legislation motion_picture paper-conference report song" match="any">\n        <choose>\n          <if is-numeric="edition">\n            <group delimiter=" ">\n              <number variable="edition" form="ordinal"/>\n              <text term="edition" form="short"/>\n            </group>\n          </if>\n          <else>\n            <text variable="edition" text-case="capitalize-first" suffix="."/>\n          </else>\n        </choose>\n      </if>\n    </choose>\n  </macro>\n  <macro name="issued">\n    <choose>\n      <if type="article-journal report" match="any">\n        <date variable="issued">\n          <date-part name="month" form="short" suffix=" "/>\n          <date-part name="year" form="long"/>\n        </date>\n      </if>\n      <else-if type="bill book chapter graphic legal_case legislation motion_picture song thesis" match="any">\n        <date variable="issued">\n          <date-part name="year" form="long"/>\n        </date>\n      </else-if>\n      <else-if type="paper-conference" match="any">\n        <date variable="issued">\n          <date-part name="month" form="short"/>\n          <date-part name="year" prefix=" "/>\n        </date>\n      </else-if>\n      <else>\n        <date variable="issued">\n          <date-part name="month" form="short" suffix=" "/>\n          <date-part name="day" form="numeric-leading-zeros" suffix=", "/>\n          <date-part name="year"/>\n        </date>\n      </else>\n    </choose>\n  </macro>\n  <macro name="author">\n    <names variable="author">\n      <name and="text" et-al-min="7" et-al-use-first="1" initialize-with=". "/>\n      <label form="short" prefix=", " text-case="capitalize-first"/>\n      <et-al font-style="italic"/>\n      <substitute>\n        <names variable="editor"/>\n        <names variable="translator"/>\n      </substitute>\n    </names>\n  </macro>\n  <macro name="editor">\n    <names variable="editor">\n      <name initialize-with=". " delimiter=", " and="text"/>\n      <label form="short" prefix=", " text-case="capitalize-first"/>\n    </names>\n  </macro>\n  <macro name="locators">\n    <group delimiter=", ">\n      <text macro="edition"/>\n      <group delimiter=" ">\n        <text term="volume" form="short"/>\n        <number variable="volume" form="numeric"/>\n      </group>\n      <group delimiter=" ">\n        <number variable="number-of-volumes" form="numeric"/>\n        <text term="volume" form="short" plural="true"/>\n      </group>\n      <group delimiter=" ">\n        <text term="issue" form="short"/>\n        <number variable="issue" form="numeric"/>\n      </group>\n    </group>\n  </macro>\n  <macro name="title">\n    <choose>\n      <if type="bill book graphic legal_case legislation motion_picture song" match="any">\n        <text variable="title" font-style="italic"/>\n      </if>\n      <else>\n        <text variable="title" quotes="true"/>\n      </else>\n    </choose>\n  </macro>\n  <macro name="publisher">\n    <choose>\n      <if type="bill book chapter graphic legal_case legislation motion_picture paper-conference song" match="any">\n        <group delimiter=": ">\n          <text variable="publisher-place"/>\n          <text variable="publisher"/>\n        </group>\n      </if>\n      <else>\n        <group delimiter=", ">\n          <text variable="publisher"/>\n          <text variable="publisher-place"/>\n        </group>\n      </else>\n    </choose>\n  </macro>\n  <macro name="event">\n    <choose>\n      <if type="paper-conference speech" match="any">\n        <choose>\n          \x3c!-- Published Conference Paper --\x3e\n          <if variable="collection-editor editor editorial-director issue page volume" match="any">\n            <group delimiter=", ">\n              <group delimiter=" ">\n                <text term="in"/>\n                <text variable="container-title" font-style="italic"/>\n              </group>\n              <text variable="event-place"/>\n            </group>\n          </if>\n          \x3c!-- Unpublished Conference Paper --\x3e\n          <else>\n            <group delimiter=", ">\n              <group delimiter=" ">\n                <text term="presented at"/>\n                <text variable="event"/>\n              </group>\n              <text variable="event-place"/>\n            </group>\n          </else>\n        </choose>\n      </if>\n    </choose>\n  </macro>\n  <macro name="access">\n    <choose>\n      <if type="webpage post post-weblog" match="any">\n        <choose>\n          <if variable="URL">\n            <group delimiter=" ">\n              <text variable="URL"/>\n              <group delimiter=" " prefix="(" suffix=")">\n                <text term="accessed"/>\n                <date variable="accessed">\n                  <date-part name="month" form="short" strip-periods="false"/>\n                  <date-part name="day" form="numeric-leading-zeros" prefix=" " suffix=", "/>\n                  <date-part name="year" form="long"/>\n                </date>\n              </group>\n            </group>\n          </if>\n        </choose>\n      </if>\n      <else-if match="any" variable="DOI">\n        <text variable="DOI" prefix="doi: "/>\n      </else-if>\n      <else>\n        <group delimiter=". ">\n          <group delimiter=": ">\n            <text term="accessed" text-case="capitalize-first"/>\n            <date variable="accessed">\n              <date-part name="month" form="short" suffix=" "/>\n              <date-part name="day" form="numeric-leading-zeros" suffix=", "/>\n              <date-part name="year"/>\n            </date>\n          </group>\n          <text term="online" prefix="[" suffix="]" text-case="capitalize-first"/>\n          <group delimiter=": ">\n            <text term="available at" text-case="capitalize-first"/>\n            <text variable="URL"/>\n          </group>\n        </group>\n      </else>\n    </choose>\n  </macro>\n  <macro name="page">\n    <choose>\n      <if type="article-journal" variable="number" match="all">\n        <group delimiter=" ">\n          <text value="Art."/>\n          <text term="issue" form="short"/>\n          <text variable="number"/>\n        </group>\n      </if>\n      <else>\n        <group delimiter=" ">\n          <label variable="page" form="short"/>\n          <text variable="page"/>\n        </group>\n      </else>\n    </choose>\n  </macro>\n  <macro name="citation-locator">\n    <group delimiter=" ">\n      <choose>\n        <if locator="page">\n          <label variable="locator" form="short"/>\n        </if>\n        <else>\n          <label variable="locator" form="short" text-case="capitalize-first"/>\n        </else>\n      </choose>\n      <text variable="locator"/>\n    </group>\n  </macro>\n  \x3c!-- Citation --\x3e\n  <citation collapse="citation-number">\n    <sort>\n      <key variable="citation-number"/>\n    </sort>\n    <layout delimiter=", ">\n      <group prefix="[" suffix="]" delimiter=", ">\n        <text variable="citation-number"/>\n        <text macro="citation-locator"/>\n      </group>\n    </layout>\n  </citation>\n  \x3c!-- Bibliography --\x3e\n  <bibliography entry-spacing="0" second-field-align="flush">\n    <layout suffix=".">\n      \x3c!-- Citation Number --\x3e\n      <text variable="citation-number" prefix="[" suffix="]"/>\n      \x3c!-- Author(s) --\x3e\n      <text macro="author" suffix=", "/>\n      \x3c!-- Rest of Citation --\x3e\n      <choose>\n        \x3c!-- Specific Formats --\x3e\n        <if type="article-journal">\n          <group delimiter=", ">\n            <text macro="title"/>\n            <text variable="container-title" font-style="italic" form="short"/>\n            <text macro="locators"/>\n            <text macro="page"/>\n            <text macro="issued"/>\n            <text macro="status"/>\n            <text macro="access"/>\n          </group>\n        </if>\n        <else-if type="paper-conference speech" match="any">\n          <group delimiter=", ">\n            <text macro="title"/>\n            <text macro="event"/>\n            <text macro="issued"/>\n            <text macro="locators"/>\n            <text macro="page"/>\n            <text macro="status"/>\n            <text macro="access"/>\n          </group>\n        </else-if>\n        <else-if type="report">\n          <group delimiter=". ">\n            <group delimiter=", ">\n              <text macro="title"/>\n              <text macro="publisher"/>\n              <group delimiter=" ">\n                <text variable="genre"/>\n                <text variable="number"/>\n              </group>\n              <text macro="issued"/>\n            </group>\n            <text macro="access"/>\n          </group>\n        </else-if>\n        <else-if type="thesis">\n          <group delimiter=", ">\n            <text macro="title"/>\n            <text variable="genre"/>\n            <text macro="publisher"/>\n            <text macro="issued"/>\n          </group>\n        </else-if>\n        <else-if type="webpage post-weblog post" match="any">\n          <group delimiter=", " suffix=". ">\n            <text macro="title"/>\n            <text variable="container-title" font-style="italic"/>\n            <text macro="issued"/>\n          </group>\n          <text macro="access"/>\n        </else-if>\n        <else-if type="patent">\n          <group delimiter=", ">\n            <text macro="title"/>\n            <text variable="number"/>\n            <text macro="issued"/>\n          </group>\n        </else-if>\n        \x3c!-- Generic/Fallback Formats --\x3e\n        <else-if type="bill book graphic legal_case legislation motion_picture report song" match="any">\n          <group delimiter=", " suffix=". ">\n            <text macro="title"/>\n            <text macro="locators"/>\n          </group>\n          <group delimiter=", ">\n            <text macro="publisher"/>\n            <text macro="issued"/>\n            <text macro="page"/>\n          </group>\n        </else-if>\n        <else-if type="article-magazine article-newspaper broadcast interview manuscript map patent personal_communication song speech thesis webpage" match="any">\n          <group delimiter=", ">\n            <text macro="title"/>\n            <text variable="container-title" font-style="italic"/>\n            <text macro="locators"/>\n            <text macro="publisher"/>\n            <text macro="page"/>\n            <text macro="issued"/>\n          </group>\n        </else-if>\n        <else-if type="chapter paper-conference" match="any">\n          <group delimiter=", " suffix=", ">\n            <text macro="title"/>\n            <group delimiter=" ">\n              <text term="in"/>\n              <text variable="container-title" font-style="italic"/>\n            </group>\n            <text macro="locators"/>\n          </group>\n          <text macro="editor" suffix=" "/>\n          <group delimiter=", ">\n            <text macro="publisher"/>\n            <text macro="issued"/>\n            <text macro="page"/>\n          </group>\n        </else-if>\n        <else>\n          <group delimiter=", " suffix=". ">\n            <text macro="title"/>\n            <text variable="container-title" font-style="italic"/>\n            <text macro="locators"/>\n          </group>\n          <group delimiter=", ">\n            <text macro="publisher"/>\n            <text macro="page"/>\n            <text macro="issued"/>\n            <text macro="access"/>\n          </group>\n        </else>\n      </choose>\n    </layout>\n  </bibliography>\n</style>\n'),e.templates.add("chicago",'<?xml version="1.0" encoding="utf-8"?>\n<style xmlns="http://purl.org/net/xbiblio/csl" class="in-text" version="1.0" demote-non-dropping-particle="display-and-sort" page-range-format="chicago">\n  <info>\n    <title>Chicago Manual of Style 17th edition (author-date)</title>\n    <id>http://www.zotero.org/styles/chicago-author-date</id>\n    <link href="http://www.zotero.org/styles/chicago-author-date" rel="self"/>\n    <link href="http://www.chicagomanualofstyle.org/tools_citationguide.html" rel="documentation"/>\n    <author>\n      <name>Julian Onions</name>\n      <email>julian.onions@gmail.com</email>\n    </author>\n    <contributor>\n      <name>Sebastian Karcher</name>\n    </contributor>\n    <contributor>\n      <name>Richard Karnesky</name>\n      <email>karnesky+zotero@gmail.com</email>\n      <uri>http://arc.nucapt.northwestern.edu/Richard_Karnesky</uri>\n    </contributor>\n    <contributor>\n      <name>Andrew Dunning</name>\n      <email>andrew.dunning@utoronto.ca</email>\n      <uri>https://orcid.org/0000-0003-0464-5036</uri>\n    </contributor>\n    <contributor>\n      <name>Matthew Roth</name>\n      <email>matthew.g.roth@yale.edu</email>\n      <uri> https://orcid.org/0000-0001-7902-6331</uri>\n    </contributor>\n    <contributor>\n      <name>Brenton M. Wiernik</name>\n    </contributor>\n    <category citation-format="author-date"/>\n    <category field="generic-base"/>\n    <summary>The author-date variant of the Chicago style</summary>\n    <updated>2018-01-24T12:00:00+00:00</updated>\n    <rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights>\n  </info>\n  <locale xml:lang="en">\n    <terms>\n      <term name="editor" form="verb-short">ed.</term>\n      <term name="container-author" form="verb">by</term>\n      <term name="translator" form="verb-short">trans.</term>\n      <term name="editortranslator" form="verb">edited and translated by</term>\n      <term name="translator" form="short">trans.</term>\n    </terms>\n  </locale>\n  <macro name="secondary-contributors">\n    <choose>\n      <if type="chapter entry-dictionary entry-encyclopedia paper-conference" match="none">\n        <group delimiter=". ">\n          <names variable="editor translator" delimiter=". ">\n            <label form="verb" text-case="capitalize-first" suffix=" "/>\n            <name and="text" delimiter=", "/>\n          </names>\n          <names variable="director" delimiter=". ">\n            <label form="verb" text-case="capitalize-first" suffix=" "/>\n            <name and="text" delimiter=", "/>\n          </names>\n        </group>\n      </if>\n    </choose>\n  </macro>\n  <macro name="container-contributors">\n    <choose>\n      <if type="chapter entry-dictionary entry-encyclopedia paper-conference" match="any">\n        <group prefix=", " delimiter=", ">\n          <names variable="container-author" delimiter=", ">\n            <label form="verb" suffix=" "/>\n            <name and="text" delimiter=", "/>\n          </names>\n          <names variable="editor translator" delimiter=", ">\n            <label form="verb" suffix=" "/>\n            <name and="text" delimiter=", "/>\n          </names>\n        </group>\n      </if>\n    </choose>\n  </macro>\n  <macro name="editor">\n    <names variable="editor">\n      <name name-as-sort-order="first" and="text" sort-separator=", " delimiter=", " delimiter-precedes-last="always"/>\n      <label form="short" prefix=", "/>\n    </names>\n  </macro>\n  <macro name="translator">\n    <names variable="translator">\n      <name name-as-sort-order="first" and="text" sort-separator=", " delimiter=", " delimiter-precedes-last="always"/>\n      <label form="short" prefix=", "/>\n    </names>\n  </macro>\n  <macro name="recipient">\n    <choose>\n      <if type="personal_communication">\n        <choose>\n          <if variable="genre">\n            <text variable="genre" text-case="capitalize-first"/>\n          </if>\n          <else>\n            <text term="letter" text-case="capitalize-first"/>\n          </else>\n        </choose>\n      </if>\n    </choose>\n    <names variable="recipient" delimiter=", ">\n      <label form="verb" prefix=" " text-case="lowercase" suffix=" "/>\n      <name and="text" delimiter=", "/>\n    </names>\n  </macro>\n  <macro name="substitute-title">\n    <choose>\n      <if type="article-magazine article-newspaper review review-book" match="any">\n        <text macro="container-title"/>\n      </if>\n    </choose>\n  </macro>\n  <macro name="contributors">\n    <group delimiter=". ">\n      <names variable="author">\n        <name and="text" name-as-sort-order="first" sort-separator=", " delimiter=", " delimiter-precedes-last="always"/>\n        <label form="short" prefix=", "/>\n        <substitute>\n          <names variable="editor"/>\n          <names variable="translator"/>\n          <names variable="director"/>\n          <text macro="substitute-title"/>\n          <text macro="title"/>\n        </substitute>\n      </names>\n      <text macro="recipient"/>\n    </group>\n  </macro>\n  <macro name="contributors-short">\n    <names variable="author">\n      <name form="short" and="text" delimiter=", " initialize-with=". "/>\n      <substitute>\n        <names variable="editor"/>\n        <names variable="translator"/>\n        <names variable="director"/>\n        <text macro="substitute-title"/>\n        <text macro="title"/>\n      </substitute>\n    </names>\n  </macro>\n  <macro name="interviewer">\n    <names variable="interviewer" delimiter=", ">\n      <label form="verb" prefix=" " text-case="capitalize-first" suffix=" "/>\n      <name and="text" delimiter=", "/>\n    </names>\n  </macro>\n  <macro name="archive">\n    <group delimiter=". ">\n      <text variable="archive_location" text-case="capitalize-first"/>\n      <text variable="archive"/>\n      <text variable="archive-place"/>\n    </group>\n  </macro>\n  <macro name="access">\n    <group delimiter=". ">\n      <choose>\n        <if type="graphic report" match="any">\n          <text macro="archive"/>\n        </if>\n        <else-if type="article-journal bill book chapter legal_case legislation motion_picture paper-conference" match="none">\n          <text macro="archive"/>\n        </else-if>\n      </choose>\n      <choose>\n        <if type="webpage post-weblog" match="any">\n          <date variable="issued" form="text"/>\n        </if>\n      </choose>\n      <choose>\n        <if variable="issued" match="none">\n          <group delimiter=" ">\n            <text term="accessed" text-case="capitalize-first"/>\n            <date variable="accessed" form="text"/>\n          </group>\n        </if>\n      </choose>\n      <choose>\n        <if type="legal_case" match="none">\n          <choose>\n            <if variable="DOI">\n              <text variable="DOI" prefix="https://doi.org/"/>\n            </if>\n            <else>\n              <text variable="URL"/>\n            </else>\n          </choose>\n        </if>\n      </choose>\n    </group>\n  </macro>\n  <macro name="title">\n    <choose>\n      <if variable="title" match="none">\n        <choose>\n          <if type="personal_communication" match="none">\n            <text variable="genre" text-case="capitalize-first"/>\n          </if>\n        </choose>\n      </if>\n      <else-if type="bill book graphic legislation motion_picture song" match="any">\n        <text variable="title" text-case="title" font-style="italic"/>\n        <group prefix=" (" suffix=")" delimiter=" ">\n          <text term="version"/>\n          <text variable="version"/>\n        </group>\n      </else-if>\n      <else-if variable="reviewed-author">\n        <choose>\n          <if variable="reviewed-title">\n            <group delimiter=". ">\n              <text variable="title" text-case="title" quotes="true"/>\n              <group delimiter=", ">\n                <text variable="reviewed-title" text-case="title" font-style="italic" prefix="Review of "/>\n                <names variable="reviewed-author">\n                  <label form="verb-short" text-case="lowercase" suffix=" "/>\n                  <name and="text" delimiter=", "/>\n                </names>\n              </group>\n            </group>\n          </if>\n          <else>\n            <group delimiter=", ">\n              <text variable="title" text-case="title" font-style="italic" prefix="Review of "/>\n              <names variable="reviewed-author">\n                <label form="verb-short" text-case="lowercase" suffix=" "/>\n                <name and="text" delimiter=", "/>\n              </names>\n            </group>\n          </else>\n        </choose>\n      </else-if>\n      <else-if type="legal_case interview patent" match="any">\n        <text variable="title"/>\n      </else-if>\n      <else>\n        <text variable="title" text-case="title" quotes="true"/>\n      </else>\n    </choose>\n  </macro>\n  <macro name="edition">\n    <choose>\n      <if type="bill book graphic legal_case legislation motion_picture report song" match="any">\n        <choose>\n          <if is-numeric="edition">\n            <group delimiter=" " prefix=". ">\n              <number variable="edition" form="ordinal"/>\n              <text term="edition" form="short" strip-periods="true"/>\n            </group>\n          </if>\n          <else>\n            <text variable="edition" text-case="capitalize-first" prefix=". "/>\n          </else>\n        </choose>\n      </if>\n      <else-if type="chapter entry-dictionary entry-encyclopedia paper-conference" match="any">\n        <choose>\n          <if is-numeric="edition">\n            <group delimiter=" " prefix=", ">\n              <number variable="edition" form="ordinal"/>\n              <text term="edition" form="short"/>\n            </group>\n          </if>\n          <else>\n            <text variable="edition" prefix=", "/>\n          </else>\n        </choose>\n      </else-if>\n    </choose>\n  </macro>\n  <macro name="locators">\n    <choose>\n      <if type="article-journal">\n        <choose>\n          <if variable="volume">\n            <text variable="volume" prefix=" "/>\n            <group prefix=" (" suffix=")">\n              <choose>\n                <if variable="issue">\n                  <text variable="issue"/>\n                </if>\n                <else>\n                  <date variable="issued">\n                    <date-part name="month"/>\n                  </date>\n                </else>\n              </choose>\n            </group>\n          </if>\n          <else-if variable="issue">\n            <group delimiter=" " prefix=", ">\n              <text term="issue" form="short"/>\n              <text variable="issue"/>\n              <date variable="issued" prefix="(" suffix=")">\n                <date-part name="month"/>\n              </date>\n            </group>\n          </else-if>\n          <else>\n            <date variable="issued" prefix=", ">\n              <date-part name="month"/>\n            </date>\n          </else>\n        </choose>\n      </if>\n      <else-if type="legal_case">\n        <text variable="volume" prefix=", "/>\n        <text variable="container-title" prefix=" "/>\n        <text variable="page" prefix=" "/>\n      </else-if>\n      <else-if type="bill book graphic legal_case legislation motion_picture report song" match="any">\n        <group prefix=". " delimiter=". ">\n          <group>\n            <text term="volume" form="short" text-case="capitalize-first" suffix=" "/>\n            <number variable="volume" form="numeric"/>\n          </group>\n          <group>\n            <number variable="number-of-volumes" form="numeric"/>\n            <text term="volume" form="short" prefix=" " plural="true"/>\n          </group>\n        </group>\n      </else-if>\n      <else-if type="chapter entry-dictionary entry-encyclopedia paper-conference" match="any">\n        <choose>\n          <if variable="page" match="none">\n            <group prefix=". ">\n              <text term="volume" form="short" text-case="capitalize-first" suffix=" "/>\n              <number variable="volume" form="numeric"/>\n            </group>\n          </if>\n        </choose>\n      </else-if>\n    </choose>\n  </macro>\n  <macro name="locators-chapter">\n    <choose>\n      <if type="chapter entry-dictionary entry-encyclopedia paper-conference" match="any">\n        <choose>\n          <if variable="page">\n            <group prefix=", ">\n              <text variable="volume" suffix=":"/>\n              <text variable="page"/>\n            </group>\n          </if>\n        </choose>\n      </if>\n    </choose>\n  </macro>\n  <macro name="locators-article">\n    <choose>\n      <if type="article-newspaper">\n        <group prefix=", " delimiter=", ">\n          <group delimiter=" ">\n            <text variable="edition"/>\n            <text term="edition"/>\n          </group>\n          <group>\n            <text term="section" form="short" suffix=" "/>\n            <text variable="section"/>\n          </group>\n        </group>\n      </if>\n      <else-if type="article-journal">\n        <choose>\n          <if variable="volume issue" match="any">\n            <text variable="page" prefix=": "/>\n          </if>\n          <else>\n            <text variable="page" prefix=", "/>\n          </else>\n        </choose>\n      </else-if>\n    </choose>\n  </macro>\n  <macro name="point-locators">\n    <choose>\n      <if variable="locator">\n        <choose>\n          <if locator="page" match="none">\n            <choose>\n              <if type="bill book graphic legal_case legislation motion_picture report song" match="any">\n                <choose>\n                  <if variable="volume">\n                    <group>\n                      <text term="volume" form="short" suffix=" "/>\n                      <number variable="volume" form="numeric"/>\n                      <label variable="locator" form="short" prefix=", " suffix=" "/>\n                    </group>\n                  </if>\n                  <else>\n                    <label variable="locator" form="short" suffix=" "/>\n                  </else>\n                </choose>\n              </if>\n              <else>\n                <label variable="locator" form="short" suffix=" "/>\n              </else>\n            </choose>\n          </if>\n          <else-if type="bill book graphic legal_case legislation motion_picture report song" match="any">\n            <number variable="volume" form="numeric" suffix=":"/>\n          </else-if>\n        </choose>\n        <text variable="locator"/>\n      </if>\n    </choose>\n  </macro>\n  <macro name="container-prefix">\n    <text term="in" text-case="capitalize-first"/>\n  </macro>\n  <macro name="container-title">\n    <choose>\n      <if type="chapter entry-dictionary entry-encyclopedia paper-conference" match="any">\n        <text macro="container-prefix" suffix=" "/>\n      </if>\n    </choose>\n    <choose>\n      <if type="webpage">\n        <text variable="container-title" text-case="title"/>\n      </if>\n      <else-if type="legal_case" match="none">\n        <group delimiter=" ">\n          <text variable="container-title" text-case="title" font-style="italic"/>\n          <choose>\n            <if type="post-weblog">\n              <text value="(blog)"/>\n            </if>\n          </choose>\n        </group>\n      </else-if>\n    </choose>\n  </macro>\n  <macro name="publisher">\n    <group delimiter=": ">\n      <text variable="publisher-place"/>\n      <text variable="publisher"/>\n    </group>\n  </macro>\n  <macro name="date">\n    <choose>\n      <if variable="issued">\n        <group delimiter=" ">\n          <date variable="original-date" form="text" date-parts="year" prefix="(" suffix=")"/>\n          <date variable="issued">\n            <date-part name="year"/>\n          </date>\n        </group>\n      </if>\n      <else-if variable="status">\n        <text variable="status" text-case="capitalize-first"/>\n      </else-if>\n      <else>\n        <text term="no date" form="short"/>\n      </else>\n    </choose>\n  </macro>\n  <macro name="date-in-text">\n    <choose>\n      <if variable="issued">\n        <group delimiter=" ">\n          <date variable="original-date" form="text" date-parts="year" prefix="[" suffix="]"/>\n          <date variable="issued">\n            <date-part name="year"/>\n          </date>\n        </group>\n      </if>\n      <else-if variable="status">\n        <text variable="status"/>\n      </else-if>\n      <else>\n        <text term="no date" form="short"/>\n      </else>\n    </choose>\n  </macro>\n  <macro name="day-month">\n    <date variable="issued">\n      <date-part name="month"/>\n      <date-part name="day" prefix=" "/>\n    </date>\n  </macro>\n  <macro name="collection-title">\n    <choose>\n      <if match="none" type="article-journal">\n        <choose>\n          <if match="none" is-numeric="collection-number">\n            <group delimiter=", ">\n              <text variable="collection-title" text-case="title"/>\n              <text variable="collection-number"/>\n            </group>\n          </if>\n          <else>\n            <group delimiter=" ">\n              <text variable="collection-title" text-case="title"/>\n              <text variable="collection-number"/>\n            </group>\n          </else>\n        </choose>\n      </if>\n    </choose>\n  </macro>\n  <macro name="collection-title-journal">\n    <choose>\n      <if type="article-journal">\n        <group delimiter=" ">\n          <text variable="collection-title"/>\n          <text variable="collection-number"/>\n        </group>\n      </if>\n    </choose>\n  </macro>\n  <macro name="event">\n    <group delimiter=" ">\n      <choose>\n        <if variable="genre">\n          <text term="presented at"/>\n        </if>\n        <else>\n          <text term="presented at" text-case="capitalize-first"/>\n        </else>\n      </choose>\n      <text variable="event"/>\n    </group>\n  </macro>\n  <macro name="description">\n    <choose>\n      <if type="interview">\n        <group delimiter=". ">\n          <text macro="interviewer"/>\n          <text variable="medium" text-case="capitalize-first"/>\n        </group>\n      </if>\n      <else-if type="patent">\n        <group delimiter=" " prefix=". ">\n          <text variable="authority"/>\n          <text variable="number"/>\n        </group>\n      </else-if>\n      <else>\n        <text variable="medium" text-case="capitalize-first" prefix=". "/>\n      </else>\n    </choose>\n    <choose>\n      <if variable="title" match="none"/>\n      <else-if type="thesis personal_communication speech" match="any"/>\n      <else>\n        <group delimiter=" " prefix=". ">\n          <text variable="genre" text-case="capitalize-first"/>\n          <choose>\n            <if type="report">\n              <text variable="number"/>\n            </if>\n          </choose>\n        </group>\n      </else>\n    </choose>\n  </macro>\n  <macro name="issue">\n    <choose>\n      <if type="legal_case">\n        <text variable="authority" prefix=". "/>\n      </if>\n      <else-if type="speech">\n        <group prefix=". " delimiter=", ">\n          <group delimiter=" ">\n            <text variable="genre" text-case="capitalize-first"/>\n            <text macro="event"/>\n          </group>\n          <text variable="event-place"/>\n          <text macro="day-month"/>\n        </group>\n      </else-if>\n      <else-if type="article-newspaper article-magazine personal_communication" match="any">\n        <date variable="issued" form="text" prefix=", "/>\n      </else-if>\n      <else-if type="patent">\n        <group delimiter=", " prefix=", ">\n          <group delimiter=" ">\n            \x3c!--Needs Localization--\x3e\n            <text value="filed"/>\n            <date variable="submitted" form="text"/>\n          </group>\n          <group delimiter=" ">\n            <choose>\n              <if variable="issued submitted" match="all">\n                <text term="and"/>\n              </if>\n            </choose>\n            \x3c!--Needs Localization--\x3e\n            <text value="issued"/>\n            <date variable="issued" form="text"/>\n          </group>\n        </group>\n      </else-if>\n      <else-if type="article-journal" match="any"/>\n      <else>\n        <group prefix=". " delimiter=", ">\n          <choose>\n            <if type="thesis">\n              <text variable="genre" text-case="capitalize-first"/>\n            </if>\n          </choose>\n          <text macro="publisher"/>\n        </group>\n      </else>\n    </choose>\n  </macro>\n  <citation et-al-min="4" et-al-use-first="1" disambiguate-add-year-suffix="true" disambiguate-add-names="true" disambiguate-add-givenname="true" givenname-disambiguation-rule="primary-name" collapse="year" after-collapse-delimiter="; ">\n    <layout prefix="(" suffix=")" delimiter="; ">\n      <group delimiter=", ">\n        <choose>\n          <if variable="issued accessed" match="any">\n            <group delimiter=" ">\n              <text macro="contributors-short"/>\n              <text macro="date-in-text"/>\n            </group>\n          </if>\n          \x3c!---comma before forthcoming and n.d.--\x3e\n          <else>\n            <group delimiter=", ">\n              <text macro="contributors-short"/>\n              <text macro="date-in-text"/>\n            </group>\n          </else>\n        </choose>\n        <text macro="point-locators"/>\n      </group>\n    </layout>\n  </citation>\n  <bibliography hanging-indent="true" et-al-min="11" et-al-use-first="7" subsequent-author-substitute="&#8212;&#8212;&#8212;" entry-spacing="0">\n    <sort>\n      <key macro="contributors"/>\n      <key variable="issued"/>\n      <key variable="title"/>\n    </sort>\n    <layout suffix=".">\n      <group delimiter=". ">\n        <text macro="contributors"/>\n        <text macro="date"/>\n        <text macro="title"/>\n      </group>\n      <text macro="description"/>\n      <text macro="secondary-contributors" prefix=". "/>\n      <text macro="container-title" prefix=". "/>\n      <text macro="container-contributors"/>\n      <text macro="edition"/>\n      <text macro="locators-chapter"/>\n      <text macro="collection-title-journal" prefix=", " suffix=", "/>\n      <text macro="locators"/>\n      <text macro="collection-title" prefix=". "/>\n      <text macro="issue"/>\n      <text macro="locators-article"/>\n      <text macro="access" prefix=". "/>\n    </layout>\n  </bibliography>\n</style>\n'),e.templates.add("mla",'<?xml version="1.0" encoding="utf-8"?>\n<style xmlns="http://purl.org/net/xbiblio/csl" class="in-text" version="1.0" demote-non-dropping-particle="never" page-range-format="minimal-two">\n  <info>\n    <title>Modern Language Association 8th edition</title>\n    <title-short>MLA</title-short>\n    <id>http://www.zotero.org/styles/modern-language-association</id>\n    <link href="http://www.zotero.org/styles/modern-language-association" rel="self"/>\n    <link href="http://style.mla.org" rel="documentation"/>\n    <author>\n      <name>Sebastian Karcher</name>\n    </author>\n    <category citation-format="author"/>\n    <category field="generic-base"/>\n    <summary>This style adheres to the MLA 8th edition handbook. Follows the structure of references as outlined in the MLA Manual closely</summary>\n    <updated>2018-12-13T20:05:10+00:00</updated>\n    <rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights>\n  </info>\n  <locale xml:lang="en">\n    <date form="text">\n      <date-part name="day" suffix=" "/>\n      <date-part name="month" suffix=" " form="short"/>\n      <date-part name="year"/>\n    </date>\n    <terms>\n      <term name="month-01" form="short">Jan.</term>\n      <term name="month-02" form="short">Feb.</term>\n      <term name="month-03" form="short">Mar.</term>\n      <term name="month-04" form="short">Apr.</term>\n      <term name="month-05" form="short">May</term>\n      <term name="month-06" form="short">June</term>\n      <term name="month-07" form="short">July</term>\n      <term name="month-08" form="short">Aug.</term>\n      <term name="month-09" form="short">Sept.</term>\n      <term name="month-10" form="short">Oct.</term>\n      <term name="month-11" form="short">Nov.</term>\n      <term name="month-12" form="short">Dec.</term>\n      <term name="translator" form="short">trans.</term>\n    </terms>\n  </locale>\n  <macro name="author">\n    <names variable="author">\n      <name name-as-sort-order="first" and="text" delimiter-precedes-last="always" delimiter-precedes-et-al="always" initialize="false" initialize-with=". "/>\n      <label form="long" prefix=", "/>\n      <substitute>\n        <names variable="editor"/>\n        <names variable="translator"/>\n        <text macro="title"/>\n      </substitute>\n    </names>\n  </macro>\n  <macro name="author-short">\n    <group delimiter=", ">\n      <names variable="author">\n        <name form="short" initialize-with=". " and="text"/>\n        <substitute>\n          <names variable="editor"/>\n          <names variable="translator"/>\n          <text macro="title-short"/>\n        </substitute>\n      </names>\n      <choose>\n        <if disambiguate="true">\n          <text macro="title-short"/>\n        </if>\n      </choose>\n    </group>\n  </macro>\n  <macro name="title">\n    <choose>\n      <if variable="container-title" match="any">\n        <text variable="title" quotes="true" text-case="title"/>\n      </if>\n      <else>\n        <text variable="title" font-style="italic" text-case="title"/>\n      </else>\n    </choose>\n  </macro>\n  <macro name="title-short">\n    <choose>\n      <if variable="container-title" match="any">\n        <text variable="title" form="short" quotes="true" text-case="title"/>\n      </if>\n      <else>\n        <text variable="title" form="short" font-style="italic" text-case="title"/>\n      </else>\n    </choose>\n  </macro>\n  <macro name="container-title">\n    <text variable="container-title" font-style="italic" text-case="title"/>\n  </macro>\n  <macro name="other-contributors">\n    <choose>\n      <if variable="container-title" match="any">\n        <group delimiter=", ">\n          <names variable="container-author" delimiter=", ">\n            <label form="verb" suffix=" "/>\n            <name and="text"/>\n          </names>\n          <names variable="editor translator" delimiter=", ">\n            <label form="verb" suffix=" "/>\n            <name and="text"/>\n          </names>\n          <names variable="director illustrator interviewer" delimiter=", ">\n            <label form="verb" suffix=" "/>\n            <name and="text"/>\n          </names>\n        </group>\n      </if>\n      <else>\n        <group delimiter=", ">\n          <names variable="container-author" delimiter=", ">\n            <label form="verb" suffix=" " text-case="capitalize-first"/>\n            <name and="text"/>\n          </names>\n          <names variable="editor translator" delimiter=", ">\n            <label form="verb" suffix=" " text-case="capitalize-first"/>\n            <name and="text"/>\n          </names>\n          <names variable="director illustrator interviewer" delimiter=", ">\n            <label form="verb" suffix=" " text-case="capitalize-first"/>\n            <name and="text"/>\n          </names>\n        </group>\n      </else>\n    </choose>\n  </macro>\n  <macro name="version">\n    <group delimiter=", ">\n      <choose>\n        <if is-numeric="edition">\n          <group delimiter=" ">\n            <number variable="edition" form="ordinal"/>\n            <text term="edition" form="short"/>\n          </group>\n        </if>\n        <else>\n          <text variable="edition" text-case="capitalize-first"/>\n        </else>\n      </choose>\n      <text variable="version"/>\n    </group>\n  </macro>\n  <macro name="volume-lowercase">\n    <group delimiter=" ">\n      <text term="volume" form="short"/>\n      <text variable="volume"/>\n    </group>\n  </macro>\n  <macro name="number">\n    <group delimiter=", ">\n      <group>\n        <choose>\n          \x3c!--lowercase if we have a preceding element--\x3e\n          <if variable="edition container-title" match="any">\n            <text macro="volume-lowercase"/>\n          </if>\n          \x3c!--other contributors preceding the volume--\x3e\n          <else-if variable="author" match="all">\n            <choose>\n              <if variable="editor translator container-author illustrator interviewer director" match="any">\n                <text macro="volume-lowercase"/>\n              </if>\n            </choose>\n          </else-if>\n          <else-if variable="editor" match="all">\n            <choose>\n              <if variable="translator container-author illustrator interviewer director" match="any">\n                <text macro="volume-lowercase"/>\n              </if>\n            </choose>\n          </else-if>\n          <else-if variable="container-author illustrator interviewer director" match="any">\n            <text macro="volume-lowercase"/>\n          </else-if>\n          <else>\n            <group delimiter=" ">\n              <text term="volume" form="short" text-case="capitalize-first"/>\n              <text variable="volume"/>\n            </group>\n          </else>\n        </choose>\n      </group>\n      <group delimiter=" ">\n        <text term="issue" form="short"/>\n        <text variable="issue"/>\n      </group>\n      <choose>\n        <if type="report">\n          <text variable="genre"/>\n        </if>\n      </choose>\n      <text variable="number"/>\n    </group>\n  </macro>\n  <macro name="publisher">\n    <text variable="publisher"/>\n  </macro>\n  <macro name="publication-date">\n    <choose>\n      <if type="book chapter paper-conference motion_picture" match="any">\n        <date variable="issued" form="numeric" date-parts="year"/>\n      </if>\n      <else-if type="article-journal article-magazine" match="any">\n        <date variable="issued" form="text" date-parts="year-month"/>\n      </else-if>\n      <else-if type="speech" match="none">\n        <date variable="issued" form="text"/>\n      </else-if>\n    </choose>\n  </macro>\n  <macro name="location">\n    <group delimiter=", ">\n      <group delimiter=" ">\n        <label variable="page" form="short"/>\n        <text variable="page"/>\n      </group>\n      <choose>\n        <if variable="source" match="none">\n          <text macro="URI"/>\n        </if>\n      </choose>\n    </group>\n  </macro>\n  <macro name="container2-title">\n    <group delimiter=", ">\n      <choose>\n        <if type="speech">\n          <text variable="event"/>\n          <date variable="event-date" form="text"/>\n          <text variable="event-place"/>\n        </if>\n      </choose>\n      <text variable="archive"/>\n      <text variable="archive-place"/>\n      <text variable="archive_location"/>\n    </group>\n  </macro>\n  <macro name="container2-location">\n    <choose>\n      <if variable="source">\n        <choose>\n          <if variable="DOI URL" match="any">\n            <group delimiter=", ">\n              <text variable="source" font-style="italic"/>\n              <text macro="URI"/>\n            </group>\n          </if>\n        </choose>\n      </if>\n    </choose>\n  </macro>\n  <macro name="URI">\n    <choose>\n      <if variable="DOI">\n        <text variable="DOI" prefix="doi:"/>\n      </if>\n      <else>\n        <text variable="URL"/>\n      </else>\n    </choose>\n  </macro>\n  <macro name="accessed">\n    \x3c!--using accessed where we don\'t have an issued date; follows recommendation on p. 53 --\x3e\n    <choose>\n      <if variable="issued" match="none">\n        <group delimiter=" ">\n          <text term="accessed" text-case="capitalize-first"/>\n          <date variable="accessed" form="text"/>\n        </group>\n      </if>\n    </choose>\n  </macro>\n  <citation et-al-min="3" et-al-use-first="1" disambiguate-add-names="true" disambiguate-add-givenname="true">\n    <layout prefix="(" suffix=")" delimiter="; ">\n      <choose>\n        <if locator="page line" match="any">\n          <group delimiter=" ">\n            <text macro="author-short"/>\n            <text variable="locator"/>\n          </group>\n        </if>\n        <else>\n          <group delimiter=", ">\n            <text macro="author-short"/>\n            <group>\n              <label variable="locator" form="short"/>\n              <text variable="locator"/>\n            </group>\n          </group>\n        </else>\n      </choose>\n    </layout>\n  </citation>\n  <bibliography hanging-indent="true" et-al-min="3" et-al-use-first="1" line-spacing="2" entry-spacing="0" subsequent-author-substitute="---">\n    <sort>\n      <key macro="author"/>\n      <key variable="title"/>\n    </sort>\n    <layout suffix=".">\n      <group delimiter=". ">\n        <text macro="author"/>\n        <text macro="title"/>\n        <date variable="original-date" form="numeric" date-parts="year"/>\n        <group delimiter=", ">\n          \x3c!---This group corresponds to MLA\'s "Container 1"--\x3e\n          <text macro="container-title"/>\n          <text macro="other-contributors"/>\n          <text macro="version"/>\n          <text macro="number"/>\n          <text macro="publisher"/>\n          <text macro="publication-date"/>\n          <text macro="location"/>\n        </group>\n        <group delimiter=", ">\n          \x3c!---This group corresponds to MLA\'s "Container 2"--\x3e\n          \x3c!--currently just using this one for archival info--\x3e\n          <text macro="container2-title"/>\n          <text macro="container2-location"/>\n        </group>\n        <text macro="accessed"/>\n      </group>\n    </layout>\n  </bibliography>\n</style>\n')}},T=Object(d.a)(L,E,[],!1,null,null,null);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function M(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?D(Object(t),!0).forEach((function(n){q(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}T.options.__file="src/components/CitationPreview.vue";var F={name:"App",components:{CitationPreview:T.exports,ContributionBlock:b,AgentSearch:C,draggable:P.a},props:["packageId","canEdit"],data:function(){return{sortedAgents:[],cl:console.log}},computed:M(M({},Object(c.c)(["serialisedContent"])),{},{citedContributors:{get:function(){return l.c.query().with("meta").where("isActive",!0).where("citeable",!0).get().sort((function(e,t){return e.citation.order-t.citation.order}))},set:function(e){e.forEach((function(e,t){var n=[];e.citation?!e.citeable&&n.push(l.d.updateMeta(e.citation.id,{to_delete:!1})):n.push(l.d.insert({data:{activity:"[citation]",scheme:"internal",agent_id:e.id,order:t+1,meta:{is_new:!0}}})),Promise.all(n).then((function(){e.citation.order!==t+1&&(l.d.update({where:e.citation.id,data:{order:t+1}}),l.d.updateMeta(e.citation.id,{is_dirty:!0}))}))}))}},otherContributors:{get:function(){return l.c.query().with("meta").where("isActive",!0).where("citeable",!1).orderBy("agent_type","desc").orderBy("standardisedName").get()},set:function(e){e.forEach((function(e){e.citation&&l.d.updateMeta(e.citation.id,{to_delete:!0})}))}}}),methods:M(M({},Object(c.b)(["initialise","getPackage"])),Object(c.d)(["setEditPermission"])),created:function(){this.getPackage(this.packageId),this.setEditPermission("True"===this.canEdit),this.initialise()}},$=Object(d.a)(F,a,[],!1,null,null,null);$.options.__file="src/App.vue";var B=$.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"help-icon"},[n("i",{staticClass:"fas fa-question-circle"}),e._v(" "),n("div",{staticClass:"help-tooltip",attrs:{role:"tooltip"}},[e._t("default")],2)])};N._withStripped=!0;var U={name:"Help"},J=Object(d.a)(U,N,[],!1,null,null,null);J.options.__file="src/components/fields/Help.vue";var V=J.exports,H=n(13),K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.classes},[n("label",{attrs:{for:e.fieldId}},[e._t("default")],2),e._v(" "),n("input",{attrs:{type:"text",id:e.fieldId,placeholder:e.placeholder},domProps:{value:e.value},on:{change:e.setValue}})])};K._withStripped=!0;var W={name:"TextField",extends:H.a,props:["placeholder"]},G=Object(d.a)(W,K,[],!1,null,null,null);G.options.__file="src/components/fields/TextField.vue";var Y=G.exports,Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.classes},[n("label",{attrs:{for:e.fieldId}},[e._t("default")],2),e._v(" "),n("select",{attrs:{id:e.fieldId},domProps:{value:e.value},on:{change:e.setValue}},e._l(e.options,(function(t){return n("option",{domProps:{value:e.optValue(t)}},[e._v(e._s(e.optLabel(t)))])})),0)])};Z._withStripped=!0;var Q={name:"SelectField",extends:H.a,props:{options:{},optValue:{default:function(){return function(e){return e}}},optLabel:{default:function(){return function(e){return e}}}}},X=Object(d.a)(Q,Z,[],!1,null,null,null);X.options.__file="src/components/fields/SelectField.vue";var ee=X.exports,te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"autocomplete",class:e.hasLabel?"autocomplete-label":"autocomplete-no-label"},[e.hasLabel?n("label",{attrs:{for:"autocomplete-text-"+e.itemId}},[e._v(e._s(e.label))]):e._e(),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.textInput,expression:"textInput"}],staticClass:"autocomplete-text",attrs:{type:"text",id:"autocomplete-text-"+e.itemId,autocomplete:"off",placeholder:"Type to search"},domProps:{value:e.textInput},on:{input:[function(t){t.target.composing||(e.textInput=t.target.value)},e.debounced],focusin:e.showOptions}}),e._v(" "),e.optionsShown&&e.optionCount>0?n("div",{staticClass:"autocomplete-options",attrs:{id:"autocomplete-list-"+e.itemId}},[e._l(e.optionBlocks,(function(t,i){return[t.length>0&&"default"!==i?n("div",{staticClass:"autocomplete-option autocomplete-block-title"},[e._v("\n                "+e._s(i)+"\n            ")]):e._e(),e._v(" "),e._l(t,(function(t){return n("div",{staticClass:"autocomplete-option",on:{click:function(n){return e.optionChange(t)}}},[e._v("\n                "+e._s(t.label)+"\n            ")])}))]})),e._v(" "),e._t("default"),e._v(" "),n("div",{staticClass:"autocomplete-option null-option",on:{click:function(t){return e.optionChange({label:null,value:null})}}},[e._v("\n            -- none --\n        ")])],2):e._e(),e._v(" "),e.optionsShown&&e.optionCount>0?n("span",{staticClass:"expand-bar",on:{click:e.hideOptions}},[n("i",{staticClass:"fas fa-caret-up"})]):e._e(),e._v(" "),n("i",{staticClass:"fas",class:e.boxIcon,attrs:{title:e.failed}})])};te._withStripped=!0;var ne=n(40),ie=n.n(ne),re={name:"Autocomplete",props:{options:[Array,Object],value:[String,Object],itemId:String,label:String,delay:{type:Number,default:200},loading:Boolean,failed:[Error,Object]},data:function(){return{textInput:null,optionsShown:!1,typing:!1}},computed:{hasLabel:function(){return this.label&&""!==this.label},optionBlocks:function(){if(Array.isArray(this.options))return{default:this.options};var e={};return Object.entries(this.options).sort((function(e,t){return"default"===e[0]?-1:"default"===t[0]?1:0})).forEach((function(t){e[t[0]]=t[1]})),e},optionCount:function(){var e=Object.values(this.optionBlocks).reduce((function(e,t){return e+t.length}),0);return e+=this.$slots.default?1:0},boxIcon:function(){return this.failed?"fa-times":this.loading?"fa-spinner fa-spin":this.typing?"fa-xs fa-ellipsis-h":"fa-check"}},methods:{showOptions:function(){this.textChange(),this.optionsShown=!0},hideOptions:function(){var e=this;setTimeout((function(){e.optionsShown=!1}),200)},textChange:function(){this.$emit("typing",this.textInput),this.typing=!1},optionChange:function(e){this.optionsShown=!1,this.textInput=e.label,this.$emit("input",e.value)},debounced:function(){this.typing=!0,this._debounced()}},created:function(){var e=this;if(this._debounced=ie()(this.textChange,this.delay),this.value){var t=this.options.filter((function(t){return t.value===e.value}));0<t.length&&(this.textInput=t[0].label)}this.$parent.$on("custom-option",this.optionChange)},watch:{value:function(){this.value||(this.textInput=null)}}},ae=Object(d.a)(re,te,[],!1,null,null,null);ae.options.__file="src/components/fields/Autocomplete.vue";var oe=ae.exports,ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"autocomplete",class:e.hasLabel?"autocomplete-label":"autocomplete-no-label"},[e.hasLabel?n("label",{attrs:{for:"autocomplete-text-list-"+e.itemId}},[e._v(e._s(e.label))]):e._e(),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.textInput,expression:"textInput"}],staticClass:"autocomplete-text",attrs:{type:"text",id:"autocomplete-text-list-"+e.itemId,autocomplete:"off",placeholder:"Type to search"},domProps:{value:e.textInput},on:{input:[function(t){t.target.composing||(e.textInput=t.target.value)},e.debounced],focusin:e.showOptions}}),e._v(" "),e.optionsShown&&e.optionCount>0?n("div",{staticClass:"autocomplete-options",attrs:{id:"autocomplete-list-"+e.itemId}},[e._l(e.optionBlocks,(function(t,i){return[t.length>0&&"default"!==i?n("div",{staticClass:"autocomplete-option autocomplete-block-title"},[e._v("\n                "+e._s(i)+"\n            ")]):e._e(),e._v(" "),e._l(t,(function(t){return n("div",{staticClass:"autocomplete-option",on:{click:function(n){return e.optionChange(t)}}},[e._v("\n                "+e._s(t.label)+"\n            ")])}))]})),e._v(" "),e._t("default"),e._v(" "),n("div",{staticClass:"autocomplete-option null-option",on:{click:function(t){return e.optionChange({label:null,value:null})}}},[e._v("\n            -- none --\n        ")])],2):e._e(),e._v(" "),e.optionsShown&&e.optionCount>0?n("span",{staticClass:"expand-bar",on:{click:e.hideOptions}},[n("i",{staticClass:"fas fa-caret-up"})]):e._e(),e._v(" "),n("div",{staticClass:"autocomplete-list-items"},e._l(e.valueList,(function(t){return n("div",[n("span",[e._v(e._s(t.label))]),e._v(" "),n("i",{staticClass:"fas fa-times",on:{click:function(n){return e.removeItem(t)}}})])})),0),e._v(" "),n("i",{staticClass:"fas",class:e.loading?"fa-spinner fa-spin":"fa-check"})])};function se(e){return function(e){if(Array.isArray(e))return le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}ce._withStripped=!0;var ue={name:"AutocompleteList",extends:oe,props:{value:Array},data:function(){return{valueList:[]}},methods:{optionChange:function(e){this.optionsShown=!1,this.textInput=null,e.value&&(this.valueList.push(e),this.$emit("input",this.valueList))},removeItem:function(e){this.valueList=this.valueList.filter((function(t){return t.value!==e.value})),this.$emit("input",this.valueList)}},created:function(){this.valueList=se(this.value)}},fe=Object(d.a)(ue,ce,[],!1,null,"0a59fd7c",null);fe.options.__file="src/components/fields/AutocompleteList.vue";var me=fe.exports;i.a.component("app",B),i.a.component("help-tooltip",V),i.a.component("input-field",H.a),i.a.component("text-field",Y),i.a.component("select-field",ee),i.a.component("autocomplete-field",oe),i.a.component("autocomplete-list",me),new i.a({el:"#contributors",store:r.a})},8:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n(15),r=n(12),a=n(20),o=n(6),c=n(16);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n,i=0;i<t.length;i++)(n=t[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=d(e);if(t){var r=d(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h,b,v,g=function(e){function t(){return l(this,t),n.apply(this,arguments)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e);var n=m(t);return function(e,t,n){t&&u(e.prototype,t),n&&u(e,n)}(t,[{key:"isActive",get:function(){var e=0<this.activities.length,t=o.a.query().where("item_id",this.id).where("item_type","agents").where("is_hidden",!1).where("to_delete",!1).exists();return e&&t}},{key:"citation",get:function(){return c.a.query().with("meta").where("agent_id",this.id).first()}},{key:"citeable",get:function(){return c.a.query().where("agent_id",this.id).whereHas("meta",(function(e){e.where("to_delete",!1)})).exists()}},{key:"standardisedName",get:function(){return"person"===this.agent_type?[this.family_name,this.given_names].join(", "):this.displayName}},{key:"displayName",get:function(){if("person"===this.agent_type){var e=[this.given_names,this.family_name];return(this.given_names_first?e:e.reverse()).join(" ")}if("org"===this.agent_type){var t=this.name;return this.location&&(t+=" (".concat(this.location,")")),t}return this.name}},{key:"citationName",get:function(){if("person"===this.agent_type){var e=this.given_names.split(" ").map((function(e){return e.slice(0,1)[0]+"."})).join(" ");return[this.family_name,e].join(", ")}return this.name}},{key:"activities",get:function(){return r.a.query().with("meta").where("agent_id",this.id).whereHas("meta",(function(e){e.where("is_hidden",!1)})).get()}}],[{key:"fields",value:function(){return{id:this.attr(null),agent_type:this.attr("person"),family_name:this.attr(null),given_names:this.attr(null),given_names_first:this.attr(!0),name:this.attr(null),location:this.attr(null),external_id:this.attr(null),external_id_scheme:this.attr(null),user_id:this.attr(null),meta:this.morphOne(o.a,"item_id","item_type"),affiliations:this.hasMany(a.a,"agent_id"),_activities:this.hasMany(r.a,"agent_id"),_citation:this.hasOne(c.a,"agent_id")}}}]),t}(i.a);v="agents",(b="entity")in(h=g)?Object.defineProperty(h,b,{value:v,enumerable:!0,configurable:!0,writable:!0}):h[b]=v}})}));